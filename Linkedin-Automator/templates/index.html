<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Applier - AI-Powered Job Application Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Cool background blobs */
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.6;
            z-index: -1;
            animation: float 20s ease-in-out infinite;
        }

        .blob-1 {
            top: 10%;
            left: 10%;
            width: 300px;
            height: 300px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            animation-delay: 0s;
        }

        .blob-2 {
            top: 20%;
            right: 10%;
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #ffecd2, #fcb69f);
            animation-delay: -5s;
        }

        .blob-3 {
            bottom: 20%;
            left: 20%;
            width: 250px;
            height: 250px;
            background: linear-gradient(45deg, #a8edea, #fed6e3);
            animation-delay: -10s;
        }

        .blob-4 {
            bottom: 30%;
            right: 20%;
            width: 180px;
            height: 180px;
            background: linear-gradient(45deg, #d299c2, #fef9d7);
            animation-delay: -15s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px) scale(1); }
            33% { transform: translateY(-30px) translateX(20px) scale(1.1); }
            66% { transform: translateY(20px) translateX(-20px) scale(0.9); }
        }

        /* Navigation */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 3rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .logo::before {
            content: '🎯';
            margin-right: 0.5rem;
            font-size: 1.8rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .nav-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .get-started-btn {
            background: #667eea;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .get-started-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .sign-in {
            color: #666;
            text-decoration: none;
            font-weight: 500;
        }

        .language-toggle {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
        }

        /* Main Content */
        .hero {
            text-align: center;
            padding: 6rem 2rem 4rem;
            position: relative;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            color: #2c3e50;
            margin-bottom: 2rem;
            line-height: 1.2;
            max-width: 1000px;
        }

        .hero-title .brand {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .typewriter-container {
            display: inline-block;
            position: relative;
            min-width: 200px;
            text-align: left;
        }

        .typewriter-text {
            border-right: 3px solid #667eea;
            animation: blink 1s infinite;
            display: inline-block;
            min-width: 180px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes blink {
            0%, 50% { border-color: #667eea; }
            51%, 100% { border-color: transparent; }
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 3rem;
            max-width: 800px;
            line-height: 1.6;
        }

        /* Job Search Section */
        .job-search-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 3rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            max-width: 600px;
            width: 100%;
        }

        .search-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .search-container {
            position: relative;
            width: 100%;
        }

        .job-search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            background: white;
        }

        .job-search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: #666;
        }

        .search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #5a67d8;
        }



        .cta-section {
            margin-bottom: 3rem;
        }

        .main-cta-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
            margin-bottom: 1rem;
        }

        .main-cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4);
        }

        .free-text {
            color: #666;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .testimonial {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            opacity: 0.8;
        }

        .testimonial-avatars {
            display: flex;
            margin-right: 1rem;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid white;
            margin-left: -10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .testimonial-text {
            color: #666;
            font-size: 0.9rem;
        }
        .job-cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .job-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .job-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .job-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .job-card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin: 0;
            flex: 1;
        }

        .job-card-location {
            font-size: 0.9rem;
            color: #666;
            background: #f8f9fa;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            white-space: nowrap;
        }

        .job-card-role {
            font-size: 1rem;
            font-weight: 600;
            color: #667eea;
            margin: 0 0 0.75rem 0;
        }

        .job-card-description {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
            margin: 0 0 1rem 0;
        }

        .job-card-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }

        .view-details {
            color: #667eea;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .no-jobs-message {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-size: 1.1rem;
        }

        /* Job Popup Styles */
        .job-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem 1.5rem;
            }

            .nav-links {
                display: none;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .hero {
                padding: 4rem 1rem 2rem;
            }

            .blob {
                display: none;
            }

            .job-search-section {
                margin: 0 1rem 3rem;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .testimonial {
                flex-direction: column;
                gap: 0.5rem;
            }

            .search-btn {
                position: static;
                width: 100%;
                margin-top: 1rem;
                transform: none;
            }

            .job-search-input {
                padding-right: 1rem;
            }
        }
        @keyframes popupSlideIn {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}           
        .analysis-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }

        .analysis-header h3 {
            color: #333;
            margin-bottom: 0.5rem;
        }

        .extracted-text-container {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .extracted-text {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            color: #333;
            white-space: pre-wrap;
        }

        .analysis-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .generate-cover-letter-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }

        .close-analysis-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }

        .popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .popup-close:hover {
            color: #333;
        }

        .popup-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            padding-right: 2rem;
        }

        .job-details {
            margin-bottom: 2rem;
        }

        .detail-item {
            margin-bottom: 1rem;
        }

        .detail-item strong {
            color: #2c3e50;
            display: inline-block;
            min-width: 120px;
        }

        .detail-item span {
            color: #666;
        }

        .detail-item p {
            margin: 0.5rem 0 0 0;
            color: #666;
            line-height: 1.6;
        }

        .popup-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        .cover-letter-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }

        .cover-letter-header h3 {
            color: #333;
            margin-bottom: 0.5rem;
        }

        .cover-letter-container {
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 2.5rem;
            margin: 1.5rem 0;
            max-height: 500px;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
        }

        .cover-letter-content {
            font-family: 'Georgia', serif;
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            white-space: pre-wrap;
            max-width: none;
            letter-spacing: 0.3px;
        }

        .cover-letter-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }

        .send-email-btn {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .send-email-btn:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .back-to-analysis-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .back-to-analysis-btn:hover {
            background: #545b62;
            transform: translateY(-2px);
        }

        /* Make the popup wider */
        .job-popup {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px; /* Increased from default */
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            padding: 2rem;
        }

        /* Blur company names */
        .company-blur {
            filter: blur(3px);
            background: rgba(0,0,0,0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }
        .apply-btn {
            flex: 1;
            background: #667eea;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .apply-btn:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        .upload-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #e9ecef;
}

        .upload-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .upload-header p {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .upload-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .file-upload-wrapper {
            position: relative;
        }

        .file-upload-wrapper input[type="file"] {
            opacity: 0;
            position: absolute;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            border: 2px dashed #667eea;
            border-radius: 12px;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .file-upload-label:hover {
            background: #e9ecef;
            border-color: #5a67d8;
        }

        .upload-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .upload-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.25rem;
        }

        .upload-hint {
            font-size: 0.8rem;
            color: #666;
        }

        .upload-btn {
            background: #28a745;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .upload-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .upload-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

/* Responsive Design */
        @media (max-width: 768px) {
            .job-cards-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .job-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .popup-actions {
                flex-direction: column;
            }
        }





        /* Responsive Design */
        @media (max-width: 768px) {
            .job-cards-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .job-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .popup-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Background blobs -->
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
    <div class="blob blob-4"></div>

    <nav class="navbar">
        <div class="logo">The Applier</div>
        <ul class="nav-links">
            <li><a href="#individuals">Individuals</a></li>
            <li><a href="#businesses">Businesses</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#pricing">Pricing</a></li>
            <li><a href="#blog">Blog</a></li>
            <li><a href="#faq">FAQ</a></li>
        </ul>
        <div class="nav-actions">
            <button class="get-started-btn">Get Started</button>
            <a href="#signin" class="sign-in">Sign In</a>
            <button class="language-toggle">🌐</button>
        </div>
    </nav>

    <main class="hero">
        <h1 class="hero-title">
            <span class="brand">The Applier</span> helps you craft perfect cover letters and optimize your resume with AI-powered insights to land your <span class="typewriter-container"><span class="typewriter-text" id="typewriter"></span></span>
        </h1>

        <p class="hero-subtitle">
            Let our AI craft personalized cover letters with one click, analyze your resume with advanced data statistics, get detailed scoring insights, and receive actionable recommendations to land your dream job faster than ever.
        </p>

        <!-- Job Search Section -->
<div class="job-search-section">
    <div class="search-title">
        🔍 Find Your Perfect Job
    </div>
    <div class="search-container">
        <span class="search-icon"></span>
        <form method="post">
        <input 
            type="text" 
            class="job-search-input" 
            placeholder="Search for jobs, companies, or keywords..."
            id="jobSearchInput"
            name="search_job_filed"
        >

        <button type="submit" class="search-btn">Search</button>
        </form>
    </div>
    
    {% if items %}
    <div style="text-align: center; margin-top: 1.5rem;">
        <p style="color: #666; margin-bottom: 1.5rem;">Found {{ items|length }} job(s). Click on any job to view details:</p>
        
        <div class="job-cards-container">
            {% for job in items %}
            <div class="job-card" onclick="showJobDetails('{{ job.job_title }}', '{{ job.role }}', '{{ job.responsibilities }}', '{{ job.location }}','{{ loop.index }}')">
                <div class="job-card-header">
                    <h3 class="job-card-title">{{ job.job_title }}</h3>
                    <span class="job-card-location">📍 {{ job.location }}</span>
                </div>
                <p class="job-card-role">{{ job.role }}</p>
                <p class="job-card-description">{{ job.responsibilities[:100] }}{% if job.responsibilities|length > 100 %}...{% endif %}</p>
                <div class="job-card-footer">
                    <span class="view-details">View Details →</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="no-jobs-message">
        <p>No Jobs Found</p>
    </div>
    {% endif %}
</div>

<!-- Job Details Popup -->
<div class="job-popup-overlay" id="jobPopup">
    <div class="job-popup">
        <button class="popup-close" onclick="closeJobPopup()">×</button>
        <div class="popup-content">
            <h2 class="popup-title" id="popupTitle">Job Title</h2>
            <div class="job-details">
                <div class="detail-item">
                    <strong>Role:</strong> <span id="popupRole">Role</span>
                </div>
                <div class="detail-item">
                    <strong>Location:</strong> <span id="popupLocation">Location</span>
                </div>
                <div class="detail-item">
                    <strong>Responsibilities:</strong>
                    <p id="popupResponsibilities">Responsibilities</p>
                </div>
            </div>
            <div class="popup-actions">
                <button class="apply-btn" onclick="applyForJob()">Apply Now</button>
            </div>
            
            <!-- Upload Form (hidden initially) -->
            <div class="upload-section" id="uploadSection" style="display: none;">
                <div class="upload-header">
                    <h3>Upload Your Resume</h3>
                    <p>Please upload your resume to complete the application</p>
                </div>
                <form method="post" enctype="multipart/form-data" action="/upload" class="upload-form">
                    <div class="file-upload-wrapper">
                        <input type="file" id="fileInput" name="file" accept=".pdf" required>

                        <label for="fileInput" class="file-upload-label">
                            <span class="upload-icon">📄</span>
                            <span class="upload-text">Choose PDF file</span>
                            <span class="upload-hint">PDF only, up to 5MB</span>
                        </label>
                    </div>
                    <button type="submit" class="upload-btn">Complete Application</button>
                </form>
            </div>
            <!-- Resume Analysis Section (hidden initially) -->
            <div class="analysis-section" id="analysisSection" style="display: none;">
                <div class="analysis-header">
                    <h3>Resume Analysis</h3>
                    <p>Here's what we extracted from your resume:</p>
                </div>
                <div class="extracted-text-container">
                    <div class="extracted-text" id="extractedText">
                        <!-- Extracted text will appear here -->
                    </div>
                </div>
                <div class="analysis-actions">
                    <button class="generate-cover-letter-btn" onclick="generateCoverLetter()">Generate Cover Letter</button>
                    <button class="close-analysis-btn" onclick="closeAnalysis()">Close</button>
                </div>
            </div>
            <!-- Cover Letter Section (hidden initially) -->
            <!-- Cover Letter Section (hidden initially) -->
            <div class="cover-letter-section" id="coverLetterSection" style="display: none;">
                <div class="cover-letter-header">
                    <h3>Generated Cover Letter</h3>
                    <p>Your personalized cover letter is ready!</p>
                </div>
                <div class="cover-letter-container">
                    <div class="cover-letter-content" id="coverLetterContent">
                        <!-- Generated cover letter will appear here -->
                    </div>
                </div>
                <div class="cover-letter-actions">
                    <a href="/login">
                    <button class="send-email-btn">Send Email</button>
                    </a>
                    <button class="back-to-analysis-btn" onclick="backToAnalysis()">Back to Analysis</button>
                </div>
            </div>
        </div>
    </div>
</div>



        <div class="cta-section">
            <button class="main-cta-btn">Get started →</button>
            <div class="free-text">Start for free</div>
        </div>
        
        <div class="testimonial">
            <div class="testimonial-avatars">
                <div class="avatar" style="background: linear-gradient(45deg, #667eea, #5a67d8);">A</div>
                <div class="avatar" style="background: linear-gradient(45deg, #764ba2, #667eea);">S</div>
                <div class="avatar" style="background: linear-gradient(45deg, #ffecd2, #fcb69f);">M</div>
                <div class="avatar" style="background: linear-gradient(45deg, #a8edea, #fed6e3);">R</div>
            </div>
            <div class="testimonial-text">
                and 5000+ job seekers found their dream job through<br>The Applier
            </div>
        </div>
    </main>

    <script>
        // Typewriter effect
        const words = [
            "dream job",
            "ideal position", 
            "perfect role",
            "next opportunity",
            "career goals",
            "target company"
        ];
        
        let wordIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typeSpeed = 100;
       
        
        const typewriterElement = document.getElementById('typewriter');
        
        function typeWriter() {
            const currentWord = words[wordIndex];
            
            if (isDeleting) {
                typewriterElement.textContent = currentWord.substring(0, charIndex - 1);
                charIndex--;
                typeSpeed = 50;
            } else {
                typewriterElement.textContent = currentWord.substring(0, charIndex + 1);
                charIndex++;
                typeSpeed = 100;
            }
            
            if (!isDeleting && charIndex === currentWord.length) {
                isDeleting = true;
                typeSpeed = 2000; // Pause at the end
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                wordIndex = (wordIndex + 1) % words.length;
                typeSpeed = 500; // Pause before next word
            }
            
            setTimeout(typeWriter, typeSpeed);
        }
        
        // Start the typewriter effect
        setTimeout(typeWriter, 1000);

        function selectJobFromMain() {
        const mainSelect = document.getElementById('mainJobSelect');
        const selectedOption = mainSelect.options[mainSelect.selectedIndex];
    
        if (mainSelect.value !== '') {
            const jobTitle = selectedOption.getAttribute('data-title');
            const role = selectedOption.getAttribute('data-role');
            const responsibilities = selectedOption.getAttribute('data-responsibilities');
            const location = selectedOption.getAttribute('data-location');
            
            openJobPopup(jobTitle, role, responsibilities, location);
        }
    }
        let currentJobIndex = 0;

        function showJobDetails(title, role, responsibilities, location, jobIndex) {
            currentJobIndex = jobIndex;
            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupRole').textContent = role;
            document.getElementById('popupLocation').textContent = location;
            document.getElementById('popupResponsibilities').textContent = responsibilities;
            
            document.getElementById('jobPopup').style.display = 'flex';
        }

        function applyForJob() {
            const title = document.getElementById('popupTitle').textContent;
            const role = document.getElementById('popupRole').textContent;
            const location = document.getElementById('popupLocation').textContent;
            const responsibilities = document.getElementById('popupResponsibilities').textContent;

            // Hide the Apply Now button and show the upload section
            document.querySelector('.popup-actions').style.display = 'none';
            document.getElementById('uploadSection').style.display = 'block';

            // Update popup title
            document.getElementById('popupTitle').textContent = `Applying for: ${title}`;

            // Send data to Flask
            fetch('/selected_data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: 'same-origin', 
                body: JSON.stringify({
                    title: title,
                    role: role,
                    location: location,
                    responsibilities: responsibilities
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Job data sent:', data);  // ✅ Confirm in browser console
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }



        // Update the upload form handling
document.addEventListener('DOMContentLoaded', function() {
    const uploadForm = document.querySelector('.upload-form');
    
    if (uploadForm) {
        uploadForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const uploadBtn = this.querySelector('.upload-btn');
            
            // Show loading state
            uploadBtn.textContent = 'Analyzing...';
            uploadBtn.disabled = true;
            
            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    showAnalysis(data.extracted_text);
                } else {
                    alert('Error: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Upload failed. Please try again.');
            })
            .finally(() => {
                uploadBtn.textContent = 'Complete Application';
                uploadBtn.disabled = false;
            });
        });
    }
});

        function showAnalysis(extractedText) {
            // Hide upload section and show analysis
            document.getElementById('uploadSection').style.display = 'none';
            document.getElementById('analysisSection').style.display = 'block';
            
            // Display the extracted text
            document.getElementById('extractedText').textContent = extractedText;
        }

        function closeAnalysis() {
            closeJobPopup();
        }
        function generateCoverLetter() {
            console.log('generateCoverLetter function called!');
            
            const generateBtn = document.querySelector('.generate-cover-letter-btn');
            
            // Show loading state
            generateBtn.textContent = 'Generating...';
            generateBtn.disabled = true;
            
            fetch('/generate_cover', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                console.log('Received data:', data);
                if (data.status === 'success') {
                    showCoverLetter(data.cover_letter);
                } else {
                    alert('Error generating cover letter: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Failed to generate cover letter. Please try again.');
            })
            .finally(() => {
                generateBtn.textContent = 'Generate Cover Letter';
                generateBtn.disabled = false;
            });
        }

        function showCoverLetter(coverLetter) {
            console.log('showCoverLetter called with:', coverLetter);
            
            // Hide analysis section and show cover letter section
            const analysisSection = document.getElementById('analysisSection');
            const coverLetterSection = document.getElementById('coverLetterSection');
            
            if (analysisSection) {
                analysisSection.style.display = 'none';
            }
            
            if (coverLetterSection) {
                coverLetterSection.style.display = 'block';
                
                // Display the generated cover letter with company names blurred
                const coverLetterContent = document.getElementById('coverLetterContent');
                if (coverLetterContent) {
                    // Get the current job's company name from the popup
                    let companyName = '';
                    
                    // Try to extract company name from job title or other sources
                    const jobTitle = document.getElementById('popupTitle').textContent;
                    const jobRole = document.getElementById('popupRole').textContent;
                    const responsibilities = document.getElementById('popupResponsibilities').textContent;
                    
                    // You can extract company name from your job data
                    // For now, let's get it from global variable or session
                    fetch('/get_current_company', {
                        method: 'GET',
                        headers: {
                    'Content-Type': 'application/json',
                }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.company) {
                            companyName = data.company;
                            
                            // Create regex to match the company name (case insensitive)
                            const companyRegex = new RegExp(`(${companyName})`, 'gi');
                            
                            let processedContent = coverLetter
                                .replace(/\n/g, '<br>')
                                .replace(companyRegex, '<span class="company-blur">$1</span>');
                            
                            coverLetterContent.innerHTML = processedContent;
                        } else {
                            // Fallback - just display without blurring
                            coverLetterContent.innerHTML = coverLetter.replace(/\n/g, '<br>');
                        }
                    })
                    .catch(error => {
                        console.error('Error getting company name:', error);
                        // Fallback - just display without blurring
                        coverLetterContent.innerHTML = coverLetter.replace(/\n/g, '<br>');
                    });
                    
                } else {
                    console.error('coverLetterContent element not found!');
                }
            } else {
                console.error('coverLetterSection element not found!');
            }
        }
        function backToAnalysis() {
            document.getElementById('coverLetterSection').style.display = 'none';
            document.getElementById('analysisSection').style.display = 'block';
        }


        function closeJobPopup() {
                    document.getElementById('jobPopup').style.display = 'none';
                    // Reset popup state when closing
                    setTimeout(() => {
                        resetPopup();        
                        // Reset file input
                        const fileInput = document.getElementById('fileInput');
                        if (fileInput) {
                            fileInput.value = '';
                            const uploadText = document.querySelector('.upload-text');
                            if (uploadText) {
                                uploadText.textContent = 'Choose file or drag and drop';
                            }
                            const uploadLabel = document.querySelector('.file-upload-label');
                            if (uploadLabel) {
                                uploadLabel.style.background = '#f8f9fa';
                                uploadLabel.style.borderColor = '#667eea';
                            }
                        }
                    }, 300);
                }


        function resetPopup() {
            // Reset popup to initial state
            document.querySelector('.popup-actions').style.display = 'flex';
            document.getElementById('uploadSection').style.display = 'none';
        }

        // File upload handling
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('fileInput');
            const uploadLabel = document.querySelector('.file-upload-label');
            
            if (fileInput) {
                fileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const uploadText = uploadLabel.querySelector('.upload-text');
                        uploadText.textContent = file.name;
                        uploadLabel.style.background = '#e8f5e8';
                        uploadLabel.style.borderColor = '#28a745';
                    }
                });
                
                // Drag and drop functionality
                uploadLabel.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.background = '#e9ecef';
                });
                
                uploadLabel.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.style.background = '#f8f9fa';
                });
                
                uploadLabel.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        fileInput.files = files;
                        const uploadText = this.querySelector('.upload-text');
                        uploadText.textContent = files[0].name;
                        this.style.background = '#e8f5e8';
                        this.style.borderColor = '#28a745';
                    }
                });
            }
        })

        function saveJob() {
            const jobTitle = document.getElementById('popupTitle').textContent;
            alert(`Job saved: ${jobTitle}\n\nAdded to your saved jobs list.`);
            // Here you would typically save to user's saved jobs
            closeJobPopup();
        }

        // Close popup when clicking outside
        document.getElementById('jobPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeJobPopup();
            }
        });

        // Close popup with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('jobPopup').style.display === 'flex') {
                closeJobPopup();
            }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add click handlers for buttons
        document.querySelectorAll('.get-started-btn, .main-cta-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                alert('Welcome to The Applier! Sign up feature coming soon.');
            });
        });
    </script>
</body>
</html>